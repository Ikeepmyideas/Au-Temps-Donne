<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription</title>
    <link rel="stylesheet" type="text/css" href="signup.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap"> 
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

</head>
<body>
    <header>
        <img src="../assets/images/logo.png" alt="Your Logo" class="logo">
    </header>
    <form id="registrationForm" method="POST">
        <!-- Page 1 -->
        <div id="page1">
        <center><div class="breadcrumb">
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
        </div></center>
        
        <center> <h1>Inscription</h1></center>
            <center> <p><strong>Déjà un compte chez nous ? <a href="">Connectez-vous</a></strong></p></center>

            
            <center>
                <div class="">
                    <!-- Ajoutez cet écouteur d'événements à votre interrupteur (switch) -->
                    <label class="toggle">
                    <input type="checkbox" id="switch" onchange="toggleSwitch()">
                     <span class="slider"></span>
                     <span class="labels" data-on="Bénévole" data-off="Bénéficiaire"></span>
                    </label>
                  </div>
            </center>
             
             
           
        <div class="form-group">
            <div class="input-group email">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
        </div>
        <div class="form-group">
            <div class="input-group">
                <label for="firstName">Prénom:</label>
                <input type="text" id="firstName" name="firstName" required>
            </div>
            <div class="input-group">
                <label for="lastName">Nom:</label>
                <input type="text" id="lastName" name="lastName" required>
            </div>
        </div>
        <div class="form-group">
            <div class="input-group">
                <label for="password">Mot de passe:*</label>
                <input type="password" id="password" name="password" required>
                <div class="password-strength">
                    <div id="passwordStrength"></div>
                </div>                
            </div>
        </div>
        <div class="form-group">

            <div class="input-group">
                <label for="confirmPassword">Confirmation de mot de passe:</label>
                <input type="password" id="confirmPassword" name="confirmPassword" required>
                <small id="passwordMatchMessage"></small>
            </div>
        </div>
        
        
       
   
        
    <center> <button onclick="showPage(2)">Suivant</button></center>
    <label id="endo">*(Minimum 8 caractères, 1 majuscule, 1 minuscule, 1 chiffre et 1 caractère spécial)</label>
    </div>

    <!-- Page 2 (initially hidden) -->
    <div id="page2" style="display: none;">
        <!-- Your new form content for page 2 -->
        <center><div class="breadcrumb">
                <div class="dot"></div>
                <div class="line first"></div>
                <div class="dot second"></div>
                <div class="line second"></div>
                <div class="dot"></div>
        </div></center>
        
        <center> <h1>Inscription</h1></center>
            <center> <p><strong>Déjà un compte chez nous ? <a href="">Connectez-vous</a></strong></p></center>
            <div class="form-group">
                <div class="input-group">
                    <label for="dob"><strong>Date de naissance:</strong></label>
                    <div class="dob-group">
                        <div class="inpu-group">
                            <label for="jour">Jour:</label>
                            <input type="number" id="jour" name="jour" min="1" max="31" required>
                        </div>
                        <div class="inpu-group">
                            <label for="mois">Mois:</label>
                            <select id="mois" name="mois" required>
                                <option></option>
                                <option value="1">Janvier</option>
                                <option value="2">Février</option>
                                <option value="3">Mars</option>
                                <option value="4">Avril</option>
                                <option value="5">Mai</option>
                                <option value="6">Juin</option>
                                <option value="7">Juillet</option>
                                <option value="8">Août</option>
                                <option value="9">Septembre</option>
                                <option value="10">Octobre</option>
                                <option value="11">Novembre</option>
                                <option value="12">Décembre</option>
                            </select>
                        </div>
                        <div class="inpu-group">
                            <label for="annee">Année:</label>
                            <input type="number" id="annee" name="annee" min="1900" max="2024" required>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="input-group">
                    <label for="genre">Genre:</label>
                    <select id="genre" name="genre" required>
                        <option value="homme">Homme</option>
                        <option value="femme">Femme</option>
                        <option value="autre">Autre</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="phoneNumber">Numéro de téléphone:</label>
                    <input type="tel" id="phoneNumber" name="phoneNumber" pattern="[0-9]{10}" required>
                </div>
            </div>
        <div class="form-group">
            <div class="input-group">
                <label for="address">Adresse:</label>
                <input type="text" id="address" name="address" required>
            </div>
        </div>
            <!-- Side-by-side layout for postal code and city -->
            <div class="form-group">
                <div class="input-group">
                    <label for="postalCode">Code Postal:</label>
                    <input type="text" id="postalCode" name="postalCode" required>
                </div>
                <div class="input-group">
                    <label for="city">Ville:</label>
                    <input type="text" id="city" name="city" required>
                </div>
            </div>
            <div class="form-group">
                <div class="input-group">
                    <label for="needsBeneficiare">Catégorie de besoin:</label>
                    <select id="needsBeneficiare" name="needsBeneficiare" style="display: block;"required>
                        <option value="Aide alimentaire">Aide alimentaire</option>
                        <option value="Soutien scolaire">Activité culturelle</option>
                        <option value="Aide médicale">Services d'Aide Générale</option>
                        <option value="Activités sociales et récréatives">Services d'Accompagnement Intégral</option>
                        <option value="Assistance sociale">Activités Sportives</option>
                        <option value="Transport et déplacement">Activités Culturelles</option>
                        <option value="Transport et déplacement">Support Psychologique</option>
                        <option value="Transport et déplacement">Formation Professionnelle</option>
                        <option value="Transport et déplacement">Conseil Juridique</option>
                        <option value="Transport et déplacement">Soutien à l'Emploi</option>
                        <option value="other">Autres besoins spécifiques</option>
                    </select>
                </div>
            </div>

        <center> <button onclick="showPage(1)">Retour</button>
            <center> <button onclick="showPage(3)">Suivant</button></center>
        </div>
            <div id="page3" style="display: none;">
                <!-- Your new form content for page 2 -->
                <center><div class="breadcrumb">
                        <div class="dot"></div>
                        <div class="line first"></div>
                        <div class="dot second"></div>
                        <div class="line second"></div>
                        <div class="dot"></div>
               </center>
                 
                <center> <h1>Inscription</h1></center>
                    <center> <p><strong>Déjà un compte chez nous ? <a href="">Connectez-vous</a></strong></p></center>
                    <div class="form-group">
                        <div class="input-group">
                            <label for="needs">Permis de Conduire:</label>
                            <select id="needs" name="needs" required>
                                <option value=""></option>
                                <option value="1">Oui</option>
                                <option value="0">Non</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                                <div class="input-group">
                                    <label for="Langues">Langues</label>
                                    <input type="text" id="Langues" name="Langues" required>
                                </div>
                            </div>
                       
                    <div class="form-group">
                        <div class="input-group">
                            <label for="Compétences">Compétences:</label>
                            <input type="text" id="Compétences" name="Compétences" required>
                        </div>
                        <div class="input-group">
                            <label for="Qualités">Qualités:</label>
                            <input type="text" id="Qualités" name="Qualités" required>
                        </div>
                    </div>
                <div class="form-group"> 
                    <div class="mb-3 inpu-group">
                    <label for="message_candidature" class="form-label">Message de canditature:</label>
                    <textarea class="form-control" id="message_candidature" name="message_candidature" rows="3" required ></textarea>
                  </div>
                </div>
               
                <center> <button onclick="showPage(2)">Retour</button>
                    <button type="submit">Finaliser</button></center>
                </div>
           
        
        <div id="page4"style="display: none;">
            <center><div class="breadcrumb">
                <div class="dot"></div>
                <div class="line first"></div>
                <div class="dot second"></div>
                <div class="line secon"></div>
                <div class="dot last"></div>
        </div></center>
        
        <center> <h1>Inscription</h1></center>
        <center><img src="../assets/images/team/" alt=""></center>
            <center><h2 style="color: #EB5454;font-size: 20px;">Vérifiez Votre E-mail pour Activer Votre Compte</h2><br/></center>
           <center><p style="color: #7A7777;font-size: 20;">Un e-mail de confirmation a été envoyé à votre adresse. Veuillez vérifier votre boîte de réception pour activer votre compte.</p></center> </div>
        </div>
</form>
<script>

let isBenevole = false;

function toggleSwitch() {
    const switchElement = document.getElementById('switch');
    isBenevole = switchElement.checked;

    // Appel de votre fonction showPage pour mettre à jour la page en fonction du choix
    showPage(3);  // Vous pouvez ajuster le numéro de la page selon votre besoin
}
function showPage(pageNumber) {
    const page1 = document.getElementById('page1');
    const page2 = document.getElementById('page2');
    const benevolePage = document.getElementById('page3');
    const beneficiairePage = document.getElementById('page4');

    // Réinitialiser l'affichage des pages
    page1.style.display = (pageNumber === 1) ? "block" : "none";
    page2.style.display = (pageNumber === 2) ? "block" : "none";
    benevolePage.style.display = 'none';
    beneficiairePage.style.display = 'none';

    // Afficher la page en fonction du choix
    if (pageNumber === 3) {
        if (isBenevole) {
            benevolePage.style.display = 'block';
            beneficiairePage.style.display = 'none'; // Masquer le champ "besoin" pour le bénévole
        } else {
            benevolePage.style.display = 'none';
            beneficiairePage.style.display = 'block';
        }
    }
}
const needsSelector = isBenevole ? 'needsBeneficaire' : 'needs';
    const needsElement = document.getElementById(needsSelector);
    if (needsElement) {
        needsElement.style.display = 'block';
    }

document.getElementById("registrationForm").addEventListener("submit", function (event) {
    // Logique existante pour afficher la page 3
    // ...

    // Ajoutez la logique pour afficher la page 3 spécifique au bénévole ou au bénéficiaire
    showPage(3);

    var formContainer = document.querySelector('#page3 .form-container');
    formContainer.classList.add('emailsended');
});

    document.getElementById("confirmPassword").addEventListener("input", function () {
        var password = document.getElementById("password").value;
        var confirmPassword = this.value;
        var message = document.getElementById("passwordMatchMessage");

        if (password === confirmPassword) {
            message.innerHTML = "Les mots de passe correspondent.";
            message.style.color = "green";
        } else {
            message.textContent = "Les mots de passe ne correspondent pas.";
            message.style.color = "red";
        }
    });

function evaluatePasswordStrength(password) {
    let score = 0;

    // Longueur minimale
    if (password.length >= 8) {
        score += 20;
    }

    // Présence de chiffres
    if (/\d/.test(password)) {
        score += 20;
    }

    // Présence de lettres majuscules
    if (/[A-Z]/.test(password)) {
        score += 20;
    }

    // Présence de caractères spéciaux
    if (/[\W_]/.test(password)) {
        score += 20;
    }

    // Présence de lettres minuscules
    if (/[a-z]/.test(password)) {
        score += 20;
    }

    return score;
}

// Fonction pour mettre à jour la barre de progression
function updateProgressBar(password) {
    const progressBar = document.getElementById("passwordStrength");

    // Évalue la force du mot de passe
    const strength = evaluatePasswordStrength(password);

    // Met à jour la largeur de la barre de progression
    progressBar.style.width = strength + "%";

    // Change la couleur de la barre de progression en fonction de la force
    if (strength < 40) {
        progressBar.style.backgroundColor = "#FF5050"; // Rouge
    } else if (strength < 70) {
        progressBar.style.backgroundColor = "#FFD700"; // Jaune
    } else {
        progressBar.style.backgroundColor = "#4CAF50"; // Vert
    }
}

// Écouteur d'événement pour le champ de mot de passe
document.getElementById("password").addEventListener("input", function () {
    const password = this.value;

    // Met à jour la barre de progression
    updateProgressBar(password);
});


</script><script>
    document.getElementById('registrationForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent default form submission
    

    // Extract form data based on the selected page
    const isPage1 = document.getElementById('page1').style.display === 'block';
    const isPage2 = document.getElementById('page2').style.display === 'block';
    const isPage3Benevole = document.getElementById('page3').style.display === 'block' && isBenevole;
    const isPage3Beneficiaire = document.getElementById('page4').style.display === 'block' && !isBenevole;

    let formData;
    if (isPage1 || isPage2) {
        // Form data for page 1 and page 2
        formData = new FormData(this);
    } else if (isPage3Benevole || isPage3Beneficiaire) {
        // Form data for page 3 based on the user type (benevole or beneficiaire)
        formData = new FormData(document.getElementById('page3'));

        // Add specific fields for the benevole
        if (isBenevole) {
            userData.permisDeConduire = formData.get('needs'); // Assuming 'needs' is the correct field name
            userData.langues = formData.get('Langues');
            userData.competences = formData.get('Compétences');
            userData.qualites = formData.get('Qualités');
            userData.messageCandidature = formData.get('message_candidature');
        }
    }

    const userData = {
        email: formData.get('email'),
        prenom: formData.get('firstName'),
        nom: formData.get('lastName'),
        motDePasse: formData.get('password'),
        dateDeNaissance: formData.get('annee') + '-' + formData.get('mois') + '-' + formData.get('jour'),
        genre: formData.get('genre'),
        numeroTelephone: formData.get('phoneNumber'),
        adresse: formData.get('address'),
        codePostal: formData.get('postalCode'),
        ville: formData.get('city'),
        besoin: isBenevole ? formData.get('needsBenevole') : formData.get('needs')
    };

    // Make POST request to backend API
    fetch('http://localhost:8000/api/volunteer/register', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(userData)
    })
        .then(response => {
            if (!response.ok) {
                throw new Error('Signup failed');
            }
            return response.json();
        })
        .then(data => {
            // Handle successful signup
            console.log('Signup successful:', data);
            // Redirect user or show success message
        })
        .catch(error => {
            // Handle signup error
            console.error('Error:', error);
            // Show error message to the user
        });
});

</script>

<style>
select#needs {
    width: 209%;
}
.switch-container {
    position: relative;
    width: 220px;
    height: 50px;
    background-color: rgba(196, 196, 196, 0.21);
    border-radius: 64px;
    display: flex;
    align-items: center;
    overflow: hidden;
    margin-top: 30px;
}
                
.switch {
    text-decoration: none;
    /* position: absolute; */
    width: 139px;
    height: 83px;
    background-color: #F96262;
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.3s ease;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
}
                
#valueDisplay {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-size: 20px;
}</style>

</body>
</html>

